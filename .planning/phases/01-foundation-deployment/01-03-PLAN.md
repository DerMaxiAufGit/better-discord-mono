---
phase: 01-foundation-deployment
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/package.json
  - frontend/tsconfig.json
  - frontend/vite.config.ts
  - frontend/index.html
  - frontend/src/main.tsx
  - frontend/src/App.tsx
  - frontend/src/components/ui/*
  - frontend/src/components/layout/AppShell.tsx
  - frontend/src/components/layout/Sidebar.tsx
  - frontend/src/components/ThemeToggle.tsx
  - frontend/tailwind.config.ts
  - frontend/src/index.css
autonomous: true

must_haves:
  truths:
    - "User sees app shell with left sidebar when viewing the app"
    - "User can click theme toggle and switch between light and dark mode"
    - "Theme persists across page refresh"
    - "Theme defaults to system preference on first visit"
    - "Sidebar can collapse to icon-only mode"
  artifacts:
    - path: "frontend/src/components/layout/AppShell.tsx"
      provides: "Main layout wrapper"
      min_lines: 20
    - path: "frontend/src/components/layout/Sidebar.tsx"
      provides: "Collapsible sidebar"
      min_lines: 30
    - path: "frontend/src/components/ThemeToggle.tsx"
      provides: "Light/dark mode switch"
      min_lines: 15
    - path: "frontend/src/index.css"
      provides: "Tailwind + theme CSS variables"
      contains: "@tailwind"
  key_links:
    - from: "frontend/src/App.tsx"
      to: "ThemeProvider"
      via: "next-themes wrapper"
      pattern: "ThemeProvider"
    - from: "frontend/src/components/ThemeToggle.tsx"
      to: "next-themes"
      via: "useTheme hook"
      pattern: "useTheme"
---

<objective>
Create the React frontend shell with shadcn/ui components, Tailwind CSS, and light/dark theme support using next-themes.

Purpose: Establishes the visual foundation and theming infrastructure. Can be built in parallel with backend (Plan 01, 02) since it doesn't need API calls yet.
Output: Working React app with sidebar layout and theme toggle that persists preference.
</objective>

<execution_context>
@C:\Users\maxi\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\maxi\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/01-foundation-deployment/01-RESEARCH.md
@.planning/phases/01-foundation-deployment/01-CONTEXT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Vite React project with shadcn/ui</name>
  <files>
    frontend/package.json
    frontend/tsconfig.json
    frontend/tsconfig.node.json
    frontend/vite.config.ts
    frontend/index.html
    frontend/src/main.tsx
    frontend/src/App.tsx
    frontend/src/vite-env.d.ts
    frontend/tailwind.config.ts
    frontend/src/index.css
    frontend/components.json
    frontend/src/lib/utils.ts
  </files>
  <action>
Initialize the frontend project structure:

1. Create package.json with dependencies:
   - react, react-dom (^19.0.0)
   - react-router (^7.0.0) - note: v7 uses "react-router" not "react-router-dom"
   - next-themes (^0.4.0)
   - zustand (^5.0.0)
   - clsx, tailwind-merge (for shadcn/ui cn utility)
   - class-variance-authority (for shadcn/ui)
   - lucide-react (icons)
   - devDependencies: vite, @vitejs/plugin-react, typescript, tailwindcss, postcss, autoprefixer, @types/react, @types/react-dom

2. Create vite.config.ts:
   - React plugin
   - Path alias: @ -> ./src

3. Create tsconfig.json for React:
   - target: ES2020
   - lib: ["ES2020", "DOM", "DOM.Iterable"]
   - module: ESNext
   - moduleResolution: bundler
   - paths: { "@/*": ["./src/*"] }

4. Create index.html with root div and correct script src

5. Create src/main.tsx:
   - Import React, ReactDOM
   - Import App and index.css
   - Render App to root

6. Create src/App.tsx:
   - Placeholder returning "Hello World"

7. Initialize Tailwind CSS:
   - tailwind.config.ts with content paths, darkMode: "class"
   - src/index.css with @tailwind directives

8. Create shadcn/ui configuration:
   - components.json pointing to src/components/ui
   - src/lib/utils.ts with cn() helper function

Run npm install and verify vite dev server starts.
  </action>
  <verify>
    - npm install completes without errors
    - npm run dev starts Vite server
    - http://localhost:5173 shows "Hello World"
    - No TypeScript errors
  </verify>
  <done>Vite React project initialized with Tailwind CSS and shadcn/ui configuration ready</done>
</task>

<task type="auto">
  <name>Task 2: Implement theme system with next-themes</name>
  <files>
    frontend/src/App.tsx
    frontend/src/components/ThemeToggle.tsx
    frontend/src/index.css
  </files>
  <action>
**Update frontend/src/index.css:**
Add CSS variables for light and dark themes (shadcn/ui pattern):

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    transition: background-color 200ms ease, color 200ms ease;
  }
}
```

**Create frontend/src/components/ThemeToggle.tsx:**
- Use useTheme hook from next-themes
- Show Sun icon in dark mode (click to switch to light)
- Show Moon icon in light mode (click to switch to dark)
- Use lucide-react icons (Sun, Moon)
- Add smooth transition on icon change
- Style as a button with hover state

**Update frontend/src/App.tsx:**
- Wrap app in ThemeProvider from next-themes
- Set attribute="class" defaultTheme="system" enableSystem
- Add ThemeToggle component for testing
- Display current theme for verification
  </action>
  <verify>
    - App renders without hydration errors
    - Theme toggle switches between light and dark
    - Page background changes with theme
    - Refresh page - theme persists
    - Delete localStorage theme key, refresh - defaults to system preference
  </verify>
  <done>Theme system works with toggle, persistence, and system preference detection</done>
</task>

<task type="auto">
  <name>Task 3: Create app shell layout with collapsible sidebar</name>
  <files>
    frontend/src/components/layout/AppShell.tsx
    frontend/src/components/layout/Sidebar.tsx
    frontend/src/components/ui/button.tsx
    frontend/src/App.tsx
  </files>
  <action>
**Create frontend/src/components/ui/button.tsx:**
Basic shadcn/ui button component using class-variance-authority:
- Variants: default, destructive, outline, secondary, ghost, link
- Sizes: default, sm, lg, icon
- Use cn() utility for class merging

**Create frontend/src/components/layout/Sidebar.tsx:**
Per CONTEXT.md decisions:
- Left sidebar, Discord/Slack style
- Collapsible to icon-only mode
- State: useState for collapsed (boolean)
- Collapsed width: ~64px (icons only), expanded: ~240px
- Contents for Phase 1:
  - User avatar placeholder (circle with initials or icon)
  - Theme toggle (move here from App)
  - Logout button (just UI, functionality in Plan 04)
- Collapse/expand button (ChevronLeft/ChevronRight icon)
- Use lucide-react icons
- Smooth width transition (~200ms as per CONTEXT.md)

**Create frontend/src/components/layout/AppShell.tsx:**
- Flexbox layout: sidebar on left, main content on right
- Accept children prop for main content area
- Main content takes remaining width (flex-1)
- Pass collapsed state to Sidebar

**Update frontend/src/App.tsx:**
- Wrap content in AppShell
- Main area shows welcome placeholder:
  - Centered "Welcome to ChatApp" heading
  - Subtext: "Select a conversation to get started" (placeholder for future)
- ThemeProvider wraps everything (stays at root)
  </action>
  <verify>
    - Sidebar renders on the left
    - Clicking collapse button toggles sidebar width
    - Icons remain visible in collapsed state
    - Theme toggle in sidebar works
    - Layout is responsive (main content fills space)
    - Transition is smooth (~200ms)
  </verify>
  <done>App shell layout complete with collapsible sidebar, theme toggle, and placeholder content</done>
</task>

</tasks>

<verification>
Manual verification checklist:

1. **Project builds:**
   ```bash
   cd frontend
   npm run build
   # Should complete without errors
   ```

2. **Theme system:**
   - Open http://localhost:5173
   - Click theme toggle - background changes
   - Refresh page - theme persists
   - Open DevTools > Application > Local Storage - see theme key
   - Delete theme key, refresh - follows system preference

3. **Sidebar:**
   - Sidebar visible on left
   - Click collapse button - sidebar shrinks to icons
   - Click expand button - sidebar expands
   - Transition is smooth (not instant)
   - Theme toggle works in sidebar

4. **Layout:**
   - Main content area shows welcome message
   - Content is centered
   - Resizing window - layout adapts
</verification>

<success_criteria>
1. Vite dev server runs without errors
2. Production build (npm run build) succeeds
3. Theme toggle switches between light/dark mode
4. Theme persists across page refresh (localStorage)
5. Theme defaults to system preference on first visit
6. Sidebar is collapsible with smooth animation
7. App shell layout has sidebar + main content area
8. All shadcn/ui base configuration in place
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-deployment/01-03-SUMMARY.md`
</output>
