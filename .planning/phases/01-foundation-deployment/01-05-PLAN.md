---
phase: 01-foundation-deployment
plan: 05
type: execute
wave: 4
depends_on: ["01-04"]
files_modified:
  - README.md
  - docs/SETUP.md
  - docs/CONFIGURATION.md
  - docs/DEVELOPMENT.md
autonomous: false

must_haves:
  truths:
    - "User can read README and understand what the project is"
    - "User can follow SETUP.md and deploy with docker compose up"
    - "User can find all environment variables documented"
    - "User can set up local development environment"
  artifacts:
    - path: "README.md"
      provides: "Project overview"
      min_lines: 50
    - path: "docs/SETUP.md"
      provides: "Deployment instructions"
      min_lines: 40
    - path: "docs/CONFIGURATION.md"
      provides: "Environment variables reference"
      min_lines: 30
  key_links:
    - from: "README.md"
      to: "docs/SETUP.md"
      via: "documentation link"
      pattern: "docs/SETUP.md|Getting Started"
---

<objective>
Create documentation for setup, configuration, and development, then verify the complete Phase 1 deployment works end-to-end.

Purpose: Documentation enables self-hosters to deploy and configure the app. Final verification ensures all Phase 1 requirements are met.
Output: README.md, docs/ folder with setup guides, verified working deployment.
</objective>

<execution_context>
@C:\Users\maxi\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\maxi\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation-deployment/01-CONTEXT.md
@.planning/phases/01-foundation-deployment/01-04-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create project README and setup documentation</name>
  <files>
    README.md
    docs/SETUP.md
    docs/CONFIGURATION.md
    docs/DEVELOPMENT.md
  </files>
  <action>
**Create README.md:**
```markdown
# ChatApp - Self-Hosted Communication Platform

A self-hosted, privacy-focused communication platform. Own your data, control your server.

## Features

- User authentication (signup/login)
- Light/dark theme support
- Docker Compose deployment
- Environment-based configuration

## Quick Start

1. Clone the repository
2. Copy `.env.example` to `.env` and configure
3. Run `docker compose up`
4. Open http://localhost in your browser

See [docs/SETUP.md](docs/SETUP.md) for detailed instructions.

## Documentation

- [Setup Guide](docs/SETUP.md) - Deployment instructions
- [Configuration](docs/CONFIGURATION.md) - Environment variables
- [Development](docs/DEVELOPMENT.md) - Local development setup

## Requirements

- Docker and Docker Compose
- 512MB RAM minimum
- Ports 80, 3000, 5432 available (or configure alternatives)

## License

MIT
```

**Create docs/SETUP.md:**
Detailed setup guide:
1. Prerequisites (Docker, Compose version)
2. Clone repository
3. Configuration
   - Copy .env.example to .env
   - Generate secure JWT_SECRET (provide command: `openssl rand -hex 32`)
   - Set database credentials
4. Deployment
   - `docker compose up -d`
   - Wait for health checks
   - Verify with `docker compose ps`
5. Access the application
   - http://localhost (or configured port)
   - Create first account
6. Troubleshooting
   - How to view logs: `docker compose logs -f`
   - How to restart: `docker compose restart`
   - How to reset: `docker compose down -v && docker compose up -d`

**Create docs/CONFIGURATION.md:**
Environment variables reference table:

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| DB_USER | Yes | - | PostgreSQL username |
| DB_PASSWORD | Yes | - | PostgreSQL password |
| DB_NAME | Yes | - | Database name |
| JWT_SECRET | Yes | - | Secret for signing JWTs (min 32 chars) |
| JWT_ACCESS_EXPIRY | No | 15m | Access token lifetime |
| JWT_REFRESH_EXPIRY | No | 7d | Refresh token lifetime |
| VITE_API_URL | No | /api | API URL for frontend |
| NODE_ENV | No | production | Environment mode |

Include security notes:
- Use strong passwords
- Generate random JWT_SECRET
- Don't commit .env to git

**Create docs/DEVELOPMENT.md:**
Local development setup:
1. Prerequisites (Node.js 20+, npm)
2. Database setup (run postgres locally or use Docker for db only)
3. Backend development
   - cd backend && npm install
   - npm run dev
4. Frontend development
   - cd frontend && npm install
   - npm run dev
5. Running tests (placeholder for future)
6. Code style (mention any linting)
  </action>
  <verify>
    - README.md exists and contains quick start section
    - docs/SETUP.md has step-by-step deployment instructions
    - docs/CONFIGURATION.md lists all env vars from .env.example
    - docs/DEVELOPMENT.md covers local setup
  </verify>
  <done>Documentation provides clear path for both deployment and development</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Verify complete Phase 1 deployment</name>
  <what-built>
    Complete Phase 1 implementation:
    - Docker infrastructure (postgres, backend, frontend)
    - User authentication (signup, login, logout, session persistence)
    - Light/dark theme toggle
    - Documentation
  </what-built>
  <how-to-verify>
    **Clean deployment test:**

    1. Remove any existing containers and volumes:
       ```bash
       docker compose down -v
       ```

    2. Follow docs/SETUP.md from scratch:
       - Ensure .env exists with proper values
       - Run `docker compose up --build -d`
       - Wait 60 seconds for health checks

    3. Verify containers are healthy:
       ```bash
       docker compose ps
       ```
       All 3 services should show "healthy"

    4. Test the application at http://localhost:

       **Auth Flow:**
       - [ ] Navigate to /signup
       - [ ] Create account with email/password
       - [ ] Verify password strength meter appears
       - [ ] Submit and verify redirect to dashboard
       - [ ] Verify user email shows in sidebar

       **Session Persistence:**
       - [ ] Refresh the page
       - [ ] Verify still logged in (not redirected to login)

       **Theme Toggle:**
       - [ ] Click theme toggle in sidebar
       - [ ] Verify background changes (light/dark)
       - [ ] Refresh page, verify theme persists

       **Logout:**
       - [ ] Click logout in sidebar
       - [ ] Verify redirect to /login
       - [ ] Try navigating to /dashboard
       - [ ] Verify redirect back to /login

       **Login:**
       - [ ] Log in with created credentials
       - [ ] Verify redirect to dashboard

       **Invalid Login:**
       - [ ] Logout first
       - [ ] Try login with wrong password
       - [ ] Verify error shows "Invalid credentials"

    5. Check documentation is accessible:
       - [ ] README.md exists at repo root
       - [ ] docs/SETUP.md has deployment steps
       - [ ] docs/CONFIGURATION.md lists all env vars
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Phase 1 Success Criteria (from ROADMAP.md):

1. [x] User can deploy entire stack with `docker compose up` on fresh machine
   - Verified by clean deployment test

2. [x] User can sign up with email/password and receive confirmation
   - Verified by signup flow (auto-login is the confirmation)

3. [x] User can log in and stay logged in across browser restarts
   - Verified by session persistence test (refresh token)

4. [x] User can toggle between light and dark mode
   - Verified by theme toggle test

5. [x] All containers report healthy status in Docker
   - Verified by `docker compose ps`

Requirements coverage:
- AUTH-01: Signup with email/password - DONE
- AUTH-02: Login with session persistence - DONE
- DEP-01: Docker compose deployment - DONE
- DEP-02: Environment variable configuration - DONE
- DEP-03: Documentation - DONE
- DEP-04: Container health checks - DONE
- UI-01: Light/dark theme toggle - DONE
</verification>

<success_criteria>
1. Documentation exists (README, SETUP, CONFIGURATION, DEVELOPMENT)
2. Clean deployment succeeds following SETUP.md
3. All Phase 1 success criteria verified
4. Human verification checkpoint passes
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-deployment/01-05-SUMMARY.md`
</output>
